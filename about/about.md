# 利用栈维护主页博文显示

>封面引用自pixiv.com pid=28947122

>本文所有代码都基于vue  

栈是一种线性表，它被描述为一个FILO(先入后出)数组。这种特性使它可以用来实现"状态管理"。实际上,深度优先搜索(dfs)所依赖的数据结构正是栈。  

我们可以通过维护栈的方式实现首页博文跳转。  

首先我们引入一个游标，这个游标总是在栈顶，它记录当前首页状态下第一篇文章的索引。一般来说，我们需要逆序读取数据库。流程是这样的:  

1. 通过前进/后退修改首页状态,同时修改栈的状态
2. 向服务器抛出ajax请求，请求的url为 /getpost/\[virner\] virner就是栈顶游标
3. 通过sql语句拉取固定数量的文章 \# limit语句
4. 服务器返回sql数据，前端同步解析json字符串
5. 前端渲染html

后面三步比较简单，问题在于我们应该如何维护栈。我们要实现这样一种效果:即使我们删除了一些文章，首页也能被正确渲染，而不是出现重复。  

首先，我们把游标置为一个很大的数,初始化的时候直接压入栈中:`let stack = [100000000]`只要你保证你以后的文章索引不会超过100000000就行。  
在created钩子中，执行ajax。服务器mysql语句: `select * from post where id<=? order by id desc limit 5`。逆序读取数据表，共5篇文章。

这样我们解决了首页的问题，然后是跳转:  
